<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>AI Image Recognition</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    background: white;
    width: 380px;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    text-align: center;
}

h2 {
    margin-bottom: 5px;
}

.subtitle {
    font-size: 13px;
    color: #666;
}

input[type=file] {
    margin: 15px 0;
}

img {
    width: 100%;
    border-radius: 10px;
    display: none;
}

.result {
    margin-top: 15px;
}

.bar {
    background: #eee;
    border-radius: 20px;
    overflow: hidden;
    margin: 6px 0;
}

.fill {
    height: 18px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    width: 0%;
    transition: 0.4s;
}

.footer {
    font-size: 12px;
    color: #777;
    margin-top: 15px;
}
</style>
</head>

<body>

<div class="card">
    <h2>AI Image Recognition</h2>
    <div class="subtitle">Upload gambar untuk diprediksi</div>

    <input type="file" accept="image/*" onchange="predictImage(event)">
    <img id="preview">

    <div id="result" class="result"></div>

    <div class="footer">
        Dibuat oleh:<br>
        <b>Gabriel Sebastian Elliman</b><br>

    </div>
</div>

<script>
const MODEL_URL = "https://teachablemachine.withgoogle.com/models/wqpnDZNic/";
let model;

async function loadModel() {
    model = await tmImage.load(
        MODEL_URL + "model.json",
        MODEL_URL + "metadata.json"
    );
}
loadModel();

async function predictImage(event) {
    const img = document.getElementById("preview");
    img.src = URL.createObjectURL(event.target.files[0]);
    img.style.display = "block";

    img.onload = async () => {
        const predictions = await model.predict(img);
        const resultDiv = document.getElementById("result");
        resultDiv.innerHTML = "";

        predictions.forEach(p => {
            const percent = (p.probability * 100).toFixed(1);
            resultDiv.innerHTML += `
                <div>${p.className} (${percent}%)</div>
                <div class="bar">
                    <div class="fill" style="width:${percent}%"></div>
                </div>
            `;
        });
    };
}
</script>

</body>
</html>
